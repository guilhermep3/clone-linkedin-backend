generator client {
  provider = "prisma-client-js"
  // output   = "../src/generated/prisma"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model certificates {
  id         Int       @id @default(autoincrement())
  name       String    @db.VarChar(80)
  issuer     String    @db.VarChar(80)
  issue_date DateTime? @db.Date
  credential String    @db.VarChar(200)
}

model companies {
  id                     Int                      @id @default(autoincrement())
  name                   String                   @db.VarChar(100)
  username               String                   @unique(map: "username") @db.VarChar(40)
  email                  String                   @unique(map: "email") @db.VarChar(100)
  password               String                   @db.VarChar(255)
  phone                  String?                  @db.VarChar(20)
  country                String?                  @db.VarChar(40)
  state                  String?                  @db.VarChar(40)
  city                   String?                  @db.VarChar(80)
  industry               String                   @db.VarChar(40)
  bio                    String?                  @db.VarChar(200)
  about                  String?                  @db.Text
  website                String?                  @db.VarChar(200)
  avatar                 String                   @default("default.jpg") @db.VarChar(200)
  cover                  String                   @default("default.jpg") @db.VarChar(200)
  presentation_video_url String?                  @db.VarChar(400)
  size                   companies_size?
  verified               Boolean                 @default(false)
  created_at             DateTime                 @default(now()) @db.Timestamp(0)
  vacancies              vacancies[]
  experience_validations experience_validations[]
  company_employees      company_employees[]
}

model company_employees {
  id              Int                               @id @default(autoincrement())
  company_id      Int
  user_id         Int
  role            String                            @db.VarChar(100)
  employment_type company_employees_employment_type
  hired_at        DateTime                          @default(now()) @db.Timestamp(0)
  users           users                             @relation(fields: [user_id], references: [id], onUpdate: Restrict, map: "company_employees_ibfk_1")
  companies       companies                         @relation(fields: [company_id], references: [id])

  @@index([user_id], map: "user_id")
}

model educations {
  id          Int       @id @default(autoincrement())
  user_id     Int
  name        String    @db.VarChar(80)
  description String    @db.VarChar(200)
  start_date  DateTime  @db.Date
  end_date    DateTime?
  users       users     @relation(fields: [user_id], references: [id], onDelete: Cascade)

  @@index([user_id])
}

model experience_skills {
  id                     Int                      @id @default(autoincrement())
  experience_id          Int
  name                   String                   @db.VarChar(40)
  level                  String                   @db.VarChar(20)
  added_at               DateTime                 @default(now()) @db.Timestamp(0)
  experiences            experiences              @relation(fields: [experience_id], references: [id], onDelete: Cascade, onUpdate: Restrict, map: "experience_skills_ibfk_1")
  experience_validations experience_validations[]

  @@index([experience_id], map: "experience_id")
}

model experience_validations {
  id         Int      @id @default(autoincrement())
  company_id Int
  skill_id   Int
  created_at DateTime @default(now()) @db.Timestamp(0)

  experience_skills experience_skills @relation(fields: [skill_id], references: [id], onDelete: Cascade, onUpdate: Restrict)
  companies         companies         @relation(fields: [company_id], references: [id], onDelete: Cascade, onUpdate: Restrict)

  @@index([skill_id])
  @@index([company_id])
}

model experiences {
  id                Int                 @id @default(autoincrement())
  user_id           Int
  name              String              @db.VarChar(60)
  role              String              @db.VarChar(100)
  description       String?             @db.Text
  start_date        DateTime            @db.Date
  end_date          DateTime?           @db.Date
  current           Boolean            @default(false)
  experience_skills experience_skills[]
  users             users               @relation(fields: [user_id], references: [id], onUpdate: Restrict, map: "experiences_ibfk_1")

  @@index([user_id], map: "user_id")
}

model following {
  id                                  Int      @id @default(autoincrement())
  follower_id                         Int
  following_id                        Int
  added_at                            DateTime @default(now()) @db.Timestamp(0)
  users_following_follower_idTousers  users    @relation("following_follower_idTousers", fields: [follower_id], references: [id], onUpdate: Restrict, map: "following_ibfk_1")
  users_following_following_idTousers users    @relation("following_following_idTousers", fields: [following_id], references: [id], onUpdate: Restrict, map: "following_ibfk_2")

  @@index([follower_id], map: "follower_id")
  @@index([following_id], map: "following_id")
}

model post_comments {
  id         Int      @id @default(autoincrement())
  user_id    Int
  post_id    Int
  content    String   @db.Text
  created_at DateTime @default(now()) @db.Timestamp(0)
  users      users    @relation(fields: [user_id], references: [id], onUpdate: Restrict, map: "post_comments_ibfk_1")
  posts      posts    @relation(fields: [post_id], references: [id], onUpdate: Restrict, map: "post_comments_ibfk_2")

  @@index([post_id], map: "post_id")
  @@index([user_id], map: "user_id")
}

model post_likes {
  id         Int      @id @default(autoincrement())
  user_id    Int
  post_id    Int
  created_at DateTime @default(now()) @db.Timestamp(0)
  users      users    @relation(fields: [user_id], references: [id], onUpdate: Restrict, map: "post_likes_ibfk_1")
  posts      posts    @relation(fields: [post_id], references: [id], onUpdate: Restrict, map: "post_likes_ibfk_2")

  @@index([post_id], map: "post_id")
  @@index([user_id], map: "user_id")
}

model post_media {
  id         Int                   @id @default(autoincrement())
  user_id    Int
  media_url  String                @db.VarChar(255)
  media_type post_media_media_type
  created_at DateTime              @default(now()) @db.Timestamp(0)
  users      users                 @relation(fields: [user_id], references: [id], onUpdate: Restrict, map: "post_media_ibfk_1")

  @@index([user_id], map: "user_id")
}

model post_shares {
  id         Int      @id @default(autoincrement())
  user_id    Int
  post_id    Int
  created_at DateTime @default(now()) @db.Timestamp(0)
  users      users    @relation(fields: [user_id], references: [id], onUpdate: Restrict, map: "post_shares_ibfk_1")
  posts      posts    @relation(fields: [post_id], references: [id], onUpdate: Restrict, map: "post_shares_ibfk_2")

  @@index([post_id], map: "post_id")
  @@index([user_id], map: "user_id")
}

model posts {
  id            Int             @id @default(autoincrement())
  user_id       Int
  content       String?         @db.Text
  visible       Boolean        @default(true)
  created_at    DateTime        @default(now()) @db.Timestamp(0)
  post_comments post_comments[]
  post_likes    post_likes[]
  post_shares   post_shares[]
  users         users           @relation(fields: [user_id], references: [id], onUpdate: Restrict, map: "posts_ibfk_1")

  @@index([user_id], map: "user_id")
}

model user_skills {
  id         Int      @id @default(autoincrement())
  user_id    Int
  name       String   @db.VarChar(40)
  level      String   @db.VarChar(20)
  created_at DateTime @default(now()) @db.Timestamp(0)
  users      users    @relation(fields: [user_id], references: [id], onUpdate: Restrict, map: "user_skills_ibfk_1")

  @@index([user_id], map: "user_id")
}

model users {
  id                                      Int                 @id @default(autoincrement())
  name                                    String              @db.VarChar(100)
  username                                String              @unique @db.VarChar(40)
  email                                   String              @unique(map: "email") @db.VarChar(100)
  password                                String              @db.VarChar(255)
  phone                                   String?             @db.VarChar(20)
  birth_date                              DateTime?           @db.Date
  country                                 String?             @db.VarChar(40)
  state                                   String?             @db.VarChar(40)
  city                                    String?             @db.VarChar(80)
  profession                              String              @db.VarChar(40)
  bio                                     String?             @db.VarChar(200)
  about                                   String?             @db.Text
  website                                 String?             @db.VarChar(200)
  avatar                                  String              @default("default.jpg") @db.VarChar(200)
  cover                                   String              @default("default.jpg") @db.VarChar(200)
  verified                                Boolean            @default(false)
  created_at                              DateTime            @default(now()) @db.Timestamp(0)
  company_employees                       company_employees[]
  experiences                             experiences[]
  following_following_follower_idTousers  following[]         @relation("following_follower_idTousers")
  following_following_following_idTousers following[]         @relation("following_following_idTousers")
  post_comments                           post_comments[]
  post_likes                              post_likes[]
  post_media                              post_media[]
  post_shares                             post_shares[]
  posts                                   posts[]
  user_skills                             user_skills[]
  vacancies                               vacancies[]
  educations                              educations[]
}

model vacancies {
  id               Int                        @id @default(autoincrement())
  title            String                     @db.VarChar(255)
  description      String                     @db.VarChar(1000)
  requirements     String?                    @db.VarChar(1000)
  benefits         String?                    @db.VarChar(1000)
  salary           Decimal?                   @db.Decimal(10, 2)
  user_posted_id   Int?
  company_id       Int
  experience_level vacancies_experience_level
  job_type         vacancies_job_type
  location         vacancies_location
  published_at     DateTime                   @default(now()) @db.Timestamp(0)
  active           Boolean                   @default(true)
  companies        companies                  @relation(fields: [company_id], references: [id], onDelete: Cascade, onUpdate: Restrict, map: "vacancies_ibfk_1")
  users            users?                     @relation(fields: [user_posted_id], references: [id], onDelete: Cascade, onUpdate: Restrict, map: "vacancies_ibfk_2")

  @@index([company_id], map: "company_id")
  @@index([user_posted_id], map: "user_posted_id")
}

enum post_media_media_type {
  image
  video
  file
}

enum company_employees_employment_type {
  full_time
  part_time
  intern
  contractor
  partner
}

enum vacancies_experience_level {
  Intern
  Assistant
  Junior
  Mid
  Senior
  Director
  Executive
}

enum vacancies_job_type {
  Full_time @map("Full-time")
  Part_time @map("Part-time")
  Temporary
  Volunteer
  Other
}

enum vacancies_location {
  Remote
  Hybrid
  On_site @map("On-site")
}

enum companies_size {
  small
  medium
  large
}
